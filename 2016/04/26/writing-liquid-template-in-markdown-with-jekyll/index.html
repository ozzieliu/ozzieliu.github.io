<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Writing Liquid Template in Markdown Code Blocks with Jekyll - The Land of Oz</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="The Land of Oz" property="og:site_name">
  
    <meta content="Writing Liquid Template in Markdown Code Blocks with Jekyll" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Journey to Data Science
" property="og:description">
  
  
    <meta content="/2016/04/26/writing-liquid-template-in-markdown-with-jekyll/" property="og:url">
  
  
    <meta content="2016-04-26T21:00:00-04:00" property="article:published_time">
    <meta content="/about/" property="article:author">
  
  
    <meta content="/img/profile.png" property="og:image">
  
  
    
  
  
    
    <meta content="jekyll" property="article:tag">
    
    <meta content="website" property="article:tag">
    
    <meta content="liquid" property="article:tag">
    
  

  
    <meta name="twitter:card" content="">
  
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@ozzieliu">
  
    <meta name="twitter:title" content="Writing Liquid Template in Markdown Code Blocks with Jekyll">
  
  
    <meta name="twitter:url" content="/2016/04/26/writing-liquid-template-in-markdown-with-jekyll/">
  
  
    <meta name="twitter:description" content="Journey to Data Science
">
  
  
    <meta name="twitter:image:src" content="/assets/img/profile.png">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/profile.png" alt="Ozzie Liu"></a>
      </div>
      <div class="author-name">Ozzie Liu</div>

      <p>The Land of Oz</p>

      <p class="about-quote">"...to embark upon a hazardous and technically unexplainable journey into the outer stratosphere" of data science.</p>

      <h3 class="contact-title">.</h3>

      <p><a href="/about">About Ozzie</a></p>
      <p><a href="/projects">Projects</a></p>
      <p><a href="/contact">Contact me</a></p>
    </div>
  </header> <!-- End Header -->

  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
          <li><a href="https://twitter.com/ozzieliu" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        <!-- 
          <li><a href="https://facebook.com/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
         -->
        
          <li class="github"><a href="http://github.com/ozzieliu" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://www.linkedin.com/in/ozzieliu" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        
        
          <li class="email"><a href="/contact"><i class="fa fa-envelope-o"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>version 1.0 (lion)<br>
      2019 &copy; Ozzie Liu</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Writing Liquid Template in Markdown Code Blocks with Jekyll</h1>
        <div class="page-date"><span>Apr 26, 2016&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p>When I was writing another blog post on listing blog posts by tags in
Jekyll,
I came across a curious problem when I try to write liquid
template code in my markdown file. Evidently, when Jekyll compiles the static
web files, it tries to process all the double curly brackets like <code class="highlighter-rouge">{{</code>
and <code class="highlighter-rouge">{%</code>, which of course leads to errors.</p>

<!--more-->

<p>Apparently this is not a bug, but just a <a href="https://github.com/jekyll/jekyll/issues/814" target="_blank">caveat of using a templating language with markdown</a>. Well
there are a few workarounds, here’s what I ended up doing.</p>

<p><img src="/assets/img/liquid-inception-top.gif" alt="inception" />
<em>Inception of raw liquid templating in liquid templating with markdown</em></p>

<h1 id="workaround-1-using-liquids-raw-tag">Workaround 1: Using Liquid’s Raw Tag</h1>

<p>One option is to use Liquid’s <a href="https://github.com/Shopify/liquid/wiki/liquid-for-designers#raw" target="_blank"><code class="highlighter-rouge">{% raw %}</code>  tag</a>.
<code class="highlighter-rouge">Raw</code> temporarily disables tag processing until the <code class="highlighter-rouge">{% endraw %}</code>.
The markdown code would then be something like this:</p>

<p><img src="/assets/img/liquid-code.png" alt="method1" />
<em>You won’t believe how confused Jekyll was when I try to write 2 <code class="highlighter-rouge">{% raw %}</code> one after another in a markdown codeblock. So I resorted to just taking a screenshot…</em></p>

<p>to render this beautifully:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul&gt;</span>
{% for tag in site.tags %}
  {% assign name = tag | first %}
  {% assign posts = tag | last %}
  <span class="nt">&lt;li&gt;</span>{{ name | camelize | replace: "-", " " }} has {{posts | size}} posts<span class="nt">&lt;/li&gt;</span>
{% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>

<h1 id="workaround-2-using-jekyll-variables-for-left-curly-braces">Workaround 2: Using Jekyll Variables for Left Curly Braces</h1>

<p>A second workaround is to use Jekyll’s site or page variables to output the left
curly braces <code class="highlighter-rouge">{</code>. I found this idea from <a href="http://nateeagle.com/2011/08/31/how-to-output-curly-brackets-in-jekyll/" target="_blank">Nate Eagle’s blog post</a>
and it breaks up the left side of Liquid tags <code class="highlighter-rouge">{%</code> and
outputs <code class="highlighter-rouge">{{</code> so that Jekyll does not process it.</p>

<p>In the YAML frontmatter of the post, you can create a variable <code class="highlighter-rouge">lcb</code> with the left
curly brace as a string, like so:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s2">"</span><span class="s">post"</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Writing</span><span class="nv"> </span><span class="s">Liquid</span><span class="nv"> </span><span class="s">Template</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">Markdown</span><span class="nv"> </span><span class="s">Code</span><span class="nv"> </span><span class="s">Blocks</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">Jekyll"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2016-04-26</span><span class="nv"> </span><span class="s">21:00"</span>
<span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">jekyll</span><span class="pi">,</span> <span class="nv">website</span><span class="pi">,</span> <span class="nv">liquid</span><span class="pi">]</span>
<span class="na">lcb</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{"</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>Then in the markdown blockcode, you can use <code class="highlighter-rouge">{{ page.lcb }}</code></p>

<p><img src="/assets/img/liquid-code2.png" alt="2" /></p>

<p>which renders in HTML nicely like this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul&gt;</span>
{% for tag in site.tags %}
  {% assign name = tag | first %}
  {% assign posts = tag | last %}
  <span class="nt">&lt;li&gt;</span>{{ name | camelize | replace: "-", " " }}
      has {{posts | size}} posts<span class="nt">&lt;/li&gt;</span>
{% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>

<p>Once the left curly braces are separated, the rest of the line won’t be processed
as Liquid template anymore.</p>

<p>You could also create a <strong>site variable</strong> by adding the <code class="highlighter-rouge">lcb: "{"</code> in your
<code class="highlighter-rouge">_config.yml</code>. Then just reference <code class="highlighter-rouge">{{site.lcb}}</code> instead.</p>

<p>I know there are a few other workarounds to escape the left curly braces, but
these are the 2 methods I found the most useful to me. If you came across a
better solution though, pelase let me know!</p>

      <div class="page-footer">
        <!-- <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=Writing Liquid Template in Markdown Code Blocks with Jekyll&url=/2016/04/26/writing-liquid-template-in-markdown-with-jekyll/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=/2016/04/26/writing-liquid-template-in-markdown-with-jekyll/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=/2016/04/26/writing-liquid-template-in-markdown-with-jekyll/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div> -->
        <div class="page-tag">
          
            <a href="/projects/#jekyll" class="tag">&#35; jekyll</a>
          
            <a href="/projects/#website" class="tag">&#35; website</a>
          
            <a href="/projects/#liquid" class="tag">&#35; liquid</a>
          
        </div>
      </div>
      <!-- <section class="comment-area">
  <div class="comment-wrapper">
    
  </div>
</section> <!-- End Comment Area -->
 -->
    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61700249-1', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
